# Docker/UML Composer/Reverser

## Docker Compose ファイルとUML 図の互換及び検証をサポートするastah*プラグインの実装

16T2133H 野々川 麗樺


　Dockerは，Docker社が開発している，コンテナ型の仮想環境を作成，配布，実行するためのプラットフォームである．従来の仮想マシンに比べ軽量で高速にビルド，デプロイが可能であるため，DevOpsで活用されている技術である．Dockerエンジンの拡張として，Docker ComposeやコンテナオーケストレーションツールのDocker Swarm ，Kubernetesなどがある．

　その中で，Docker compose は，マルチコンテナの環境をローカルで管理するツールであり，実行時にユーザーから提供されたYAML形式の設定情報を読み込むことで，環境を構築し，起動する．これによって一回の実行で複数のコンテナから成るサービスを実行することができる．

　しかし，YAML形式でのコンテナ間の依存関係は直観的でないため，設計に間違いが生じやすいと判断して良い．UML図（統一モデリング言語）は，オブジェクト指向の分析や設計のためのモデリング言語であり，各種のダイアグラムが考案されており，用途に合わせて適切な図を選択できる．各種の図の中で，複合構造図はコンポーネントや個々のクラスとその構成要素（パーツ）を示すのに適した図式であり，これを用いてDocker Compose で使用するYAMLテキストを表現することで，コンテナの依存関係とネットワーク関係をシンプルな図の形式で示すことが可能である．

　そこで，本研究では，設計の効率を向上させるため，Docker Compose YAML ファイルからUML 図を生成するリバーサー及びその逆を行うコンポーザーのastah*プラグインを実装し， Docker ComposeファイルとUML図との互換を図る．

　さらに，コンテナの設定情報を編集できるUIをプラグインに実装することで，外部に頼らない設計方式を可能にする．従来のYAMLによる記述方式では，コンテナを削除，編集時に依存箇所も編集する必要があるため，エラーが発生しやすい．プラグインのUI経由で編集することで，編集結果を自動的に全体に反映する．

　また，Docker Composeでは起動時に提供されたYAMLファイルが仕様と一致するかを検査するが，この動作をプラグインによる設計時に動的に行う機能を実装することで，エラーを早い段階で発見することができる．さらに，仕様の検査のみでなく，依存関係のループといったシステムの妥当性の検証機能を追加することでさらに正確性を高める．

(2020.2.10)
